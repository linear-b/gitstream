manifest:
  version: 1.0

triggers:
  on:
    - commit
    - pr_created

automations:
  ask_ai_tests:
    if:
      - {{ pr.labels | match(term="askai tests") | some }}
    run:
      - action: add-comment@v1
        args:
          comment: |
            ## gitStream askAI: recommended tests for this PR ðŸ§ª
            {{ source | askAI("experienced software developer focused on QA testing",
              "Review the PR code diff.
              - Identify any new or modified functions without test coverage.
              - Suggest specific test cases to add, including edge cases.
              - If all functions are covered, return 'No additional tests needed.'", env.OPEN_AI_TOKEN) }}
            _This response was generated by the gitStream askAI plugin._