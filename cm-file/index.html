<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn how to customize gitStream to meet the needs of your organization."><meta name=author content=LinearB><link href=../integrations/ rel=prev><link href=../execution-model/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.1.0"><title>gitStream Configuration Overview - gitStream Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.402914a4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.a0c5b2b5.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-WE4YLK8TT5"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-WE4YLK8TT5",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-WE4YLK8TT5",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#gitstream-configuration-overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="gitStream Documentation" class="md-header__button md-logo" aria-label="gitStream Documentation" data-md-component=logo> <img src=../assets/gitstream-w.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> gitStream Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> gitStream Configuration Overview </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/linear-b/gitstream title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> linear-b/gitstream </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="gitStream Documentation" class="md-nav__button md-logo" aria-label="gitStream Documentation" data-md-component=logo> <img src=../assets/gitstream-w.webp alt=logo> </a> gitStream Documentation </label> <div class=md-nav__source> <a href=https://github.com/linear-b/gitstream title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> linear-b/gitstream </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../github-installation/ class=md-nav__link> GitHub Setup </a> </li> <li class=md-nav__item> <a href=../custom-github-app/ class=md-nav__link> GitHub Server (Custom App) </a> </li> <li class=md-nav__item> <a href=../gitlab-installation/ class=md-nav__link> GitLab Setup </a> </li> <li class=md-nav__item> <a href=../bitbucket-installation/ class=md-nav__link> Bitbucket Cloud Setup </a> </li> <li class=md-nav__item> <a href=../managed-mode/ class=md-nav__link> Managed Mode </a> </li> <li class=md-nav__item> <a href=../how-it-works/ class=md-nav__link> How gitStream works </a> </li> <li class=md-nav__item> <a href=../quick-start/ class=md-nav__link> Your First Automation </a> </li> <li class=md-nav__item> <a href=../dry-run-mode/ class=md-nav__link> How to Test Your Automations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../automations/automation-library/ class=md-nav__link> Automation Library </a> </li> <li class=md-nav__item> <a href=../integrations/ class=md-nav__link> Integrations </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Configuration <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Configuration </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#automation-rules class=md-nav__link> Automation rules </a> <nav class=md-nav aria-label="Automation rules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#repository-automation-rules class=md-nav__link> Repository automation rules </a> </li> <li class=md-nav__item> <a href=#organization-automation-rules class=md-nav__link> Organization automation rules </a> </li> <li class=md-nav__item> <a href=#setting-up-global-automation-rules class=md-nav__link> Setting up Global Automation rules </a> </li> <li class=md-nav__item> <a href=#controlling-organization-level-rules-per-repository class=md-nav__link> Controlling Organization-Level Rules per Repository </a> <nav class=md-nav aria-label="Controlling Organization-Level Rules per Repository"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#repository-inclusion-and-exclusion class=md-nav__link> Repository Inclusion and Exclusion </a> </li> <li class=md-nav__item> <a href=#creating-repository-type-specific-rules class=md-nav__link> Creating Repository-Type Specific Rules </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-cm-automation-file class=md-nav__link> The .cm automation file </a> <nav class=md-nav aria-label="The .cm automation file"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#schema class=md-nav__link> Schema </a> <nav class=md-nav aria-label=Schema> <ul class=md-nav__list> <li class=md-nav__item> <a href=#manifest class=md-nav__link> manifest </a> </li> <li class=md-nav__item> <a href=#config class=md-nav__link> config </a> <nav class=md-nav aria-label=config> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configadminusers class=md-nav__link> config.admin.users </a> </li> <li class=md-nav__item> <a href=#configignore_files class=md-nav__link> config.ignore_files </a> </li> <li class=md-nav__item> <a href=#configuser_mapping class=md-nav__link> config.user_mapping </a> </li> <li class=md-nav__item> <a href=#configgit_history_since class=md-nav__link> config.git_history_since </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#triggers class=md-nav__link> triggers </a> </li> <li class=md-nav__item> <a href=#automations class=md-nav__link> automations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reusing-checks class=md-nav__link> Reusing checks </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../execution-model/ class=md-nav__link> Trigger Control </a> </li> <li class=md-nav__item> <a href=../limits/ class=md-nav__link> Automation Limits </a> </li> <li class=md-nav__item> <a href=../context-variables/ class=md-nav__link> Context variables </a> </li> <li class=md-nav__item> <a href=../filter-functions/ class=md-nav__link> Filter functions </a> </li> <li class=md-nav__item> <a href=../automation-actions/ class=md-nav__link> Automation actions </a> </li> <li class=md-nav__item> <a href=../user-commands/ class=md-nav__link> User commands </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> Plugins <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../plugins/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../plugins-for-developers/ class=md-nav__link> Plugins Development </a> </li> <li class=md-nav__item> <a href=../filter-function-plugins/ class=md-nav__link> Filter Functions Plugins List </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../gitStream-playground/ class=md-nav__link> Playground </a> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=https://app.gitstream.cm/login class=md-nav__link> Login </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#automation-rules class=md-nav__link> Automation rules </a> <nav class=md-nav aria-label="Automation rules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#repository-automation-rules class=md-nav__link> Repository automation rules </a> </li> <li class=md-nav__item> <a href=#organization-automation-rules class=md-nav__link> Organization automation rules </a> </li> <li class=md-nav__item> <a href=#setting-up-global-automation-rules class=md-nav__link> Setting up Global Automation rules </a> </li> <li class=md-nav__item> <a href=#controlling-organization-level-rules-per-repository class=md-nav__link> Controlling Organization-Level Rules per Repository </a> <nav class=md-nav aria-label="Controlling Organization-Level Rules per Repository"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#repository-inclusion-and-exclusion class=md-nav__link> Repository Inclusion and Exclusion </a> </li> <li class=md-nav__item> <a href=#creating-repository-type-specific-rules class=md-nav__link> Creating Repository-Type Specific Rules </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-cm-automation-file class=md-nav__link> The .cm automation file </a> <nav class=md-nav aria-label="The .cm automation file"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#schema class=md-nav__link> Schema </a> <nav class=md-nav aria-label=Schema> <ul class=md-nav__list> <li class=md-nav__item> <a href=#manifest class=md-nav__link> manifest </a> </li> <li class=md-nav__item> <a href=#config class=md-nav__link> config </a> <nav class=md-nav aria-label=config> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configadminusers class=md-nav__link> config.admin.users </a> </li> <li class=md-nav__item> <a href=#configignore_files class=md-nav__link> config.ignore_files </a> </li> <li class=md-nav__item> <a href=#configuser_mapping class=md-nav__link> config.user_mapping </a> </li> <li class=md-nav__item> <a href=#configgit_history_since class=md-nav__link> config.git_history_since </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#triggers class=md-nav__link> triggers </a> </li> <li class=md-nav__item> <a href=#automations class=md-nav__link> automations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reusing-checks class=md-nav__link> Reusing checks </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/linear-b/gitstream/edit/main/docs/cm-file.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=gitstream-configuration-overview>gitStream Configuration Overview</h1> <p>Continuous Merge automation files have a <code>.cm</code> extension. In a repository, gitStream loads and parse the <code>.cm</code> directory, which can have multiple automation files, each of which is evaluated independently.</p> <p>You can edit the <code>.cm</code> files and add your own checks and rules. Check out the <a href=/examples>Automation examples</a>.</p> <h2 id=automation-rules>Automation rules</h2> <p>There are two types of automation rules: repository level rules and organization level rules.</p> <p>Repository level rules are set by creating a special <code>.cm</code> directory in the repository root. Automation rules are specified in files in this directory, which can have any name but must end with <code>.cm</code>.</p> <p>Organization level rules are defined by creating a special repository named <code>cm</code> in the organization or group. In this repository, you can add CM automation files, which will apply to all the repositories that gitStream app is connected.</p> <p><strong>When organization level rules are defines, repository level automation shall take precedence and override organization automation when having the same identifier.</strong></p> <p>An automation identifier is a composition of the CM file name and the automation name. For example when <code>safe_changes</code> is defined in <code>gitstream.cm</code> then the automation identifier shall be <code>gitstream/safe_changes</code></p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can select (include or exclude) certain repositories per automation file using the <a href=../execution-model/#triggers-section><code>triggers.include.repository</code></a> and <a href=../execution-model/#triggers-section><code>triggers.exclude.repository</code></a></p> </div> <h3 id=repository-automation-rules>Repository automation rules</h3> <p>Repository automation rules are set by creating a special <code>.cm</code> directory in your repository root. Automation rules are specified in files in this directory, these files can have any name but must end with <code>.cm</code>. By default, you start with a single automation file <code>.cm/gitstream.cm</code>.</p> <p>Every file is parsed independently, and the parsing results are combined and executed.</p> <p>Specifically:</p> <ol> <li>Automation rules are allowed to have same name in different <code>.cm</code> files</li> <li>The <code>config</code> section is defined per <code>.cm</code> file (except <code>config.admin</code>)</li> <li>Any accessory expression defined in each file scope, therefore cannot be reused in another file (but it can be duplicated)</li> </ol> <p>When configured correctly, your repository directory structure should look like that (for GitHub):</p> <div class=highlight><span class=filename>Repsository automation rules</span><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>.
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>├─ .cm/
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>│  └─ *.cm
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>├─ .github/
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>│  └─ workflows/
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>│     └─ gitstream.yml
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <code>.cm/gitstream.cm</code> is special, as it allows repository-level configuration such as <code>config.admin</code>.</p> </div> <h3 id=organization-automation-rules>Organization automation rules</h3> <p>Organization automation rules are defined by creating a special repository <code>cm</code> in your organization or group. In this repository, you can add CM automation files, which will apply to all the repositories that gitStream app is connected.</p> <p>When configured correctly, the <code>cm</code> repository directory structure should look like that (for GitHub):</p> <div class=highlight><span class=filename>Repsository automation rules</span><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>.
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>├─ *.cm
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>├─ .github/
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>│  └─ workflows/
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>│     └─ gitstream.yml
</code></pre></div> <p>For each PR the following automation rules are applied:</p> <ol> <li>Repository level rules</li> <li>Organization-level rules, unless with the same identifier as a repository-level automation</li> </ol> <p>When organization level rules are defined, then the CI/CD will be executed on the <code>cm</code> repository on behalf of the PR repository.</p> <h3 id=setting-up-global-automation-rules>Setting up Global Automation rules</h3> <p>By utilizing the following techniques, you can effectively combine and manage global and repository rules to customize the behavior of your automations to fit the specific requirements of your repositories:</p> <ol> <li>Global rules are defined in the configuration management <code>cm</code> repository and are applied to all repositories that are connected to gitStream.</li> <li>To exclude or run only on specific repositories from a global rule, you can use <code>triggers.include.repository</code> and <code>triggers.exclude.repository</code> in the <code>cm</code> file and add a list of the unwanted or wanted repositories respectfully.</li> <li>To override a global rule for specific automation in a repository, you can duplicate the rule (both the file and automation name) and place it in the desired repository. The locally defined rule will then take precedence over the global rule for that specific repository.</li> </ol> <h3 id=controlling-organization-level-rules-per-repository>Controlling Organization-Level Rules per Repository</h3> <p>The <code>triggers</code> section in organization-level rules allows you to precisely control which repositories will run specific automations. This is particularly useful for implementing standardized rules across most repositories while exempting specific ones, or for creating specialized automations that only apply to certain repository types.</p> <h4 id=repository-inclusion-and-exclusion>Repository Inclusion and Exclusion</h4> <p>You can use <code>triggers.include.repository</code> and <code>triggers.exclude.repository</code> to define which repositories should or should not run particular automations:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># In your organization&#39;s &#39;cm&#39; repository</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=nt>manifest</span><span class=p>:</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=c1># This automation will run on all repositories EXCEPT those containing &#39;legacy&#39; in their name</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=nt>triggers</span><span class=p>:</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>  </span><span class=nt>exclude</span><span class=p>:</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">r/legacy/</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>  </span><span class=nt>enforce_pr_title_format</span><span class=p>:</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=k>not</span> <span class=o>(</span><span class=nv>pr.title</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s2>&quot;fix:|feat:|docs:|style:|refactor:|test:|chore:&quot;</span><span class=o>))</span> <span class=cp>}}</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-comment@v1</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=w>          </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=w>            </span><span class=no>Please format your PR title according to our [Conventional Commits](https://www.conventionalcommits.org/) standard.</span>
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=w>            </span><span class=no>Example: `feat: implement new login flow`</span>
</code></pre></div> <h4 id=creating-repository-type-specific-rules>Creating Repository-Type Specific Rules</h4> <p>You can also create separate CM files for different types of repositories:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># backend-rules.cm in your organization&#39;s &#39;cm&#39; repository</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nt>manifest</span><span class=p>:</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=c1># This file&#39;s automations will ONLY run on repositories with &#39;api&#39; or &#39;service&#39; in their name</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=nt>triggers</span><span class=p>:</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>  </span><span class=nt>include</span><span class=p>:</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">r/api|service/</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>  </span><span class=nt>require_api_docs</span><span class=p>:</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=o>/</span><span class=nv>api</span><span class=err>\</span><span class=o>/</span><span class=err>.</span><span class=o>*</span><span class=err>\</span><span class=nv>.js</span><span class=o>|</span><span class=nf>ts</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">request-changes@v1</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>          </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>            </span><span class=no>API changes detected. Please ensure you&#39;ve updated the corresponding documentation.</span>
</code></pre></div> <p>This approach allows you to create specialized rule sets for different repository types (frontend, backend, infrastructure, etc.) while maintaining them all in a centralized location.</p> <h2 id=the-cm-automation-file>The .cm automation file</h2> <h3 id=schema>Schema</h3> <p>The following sections are used in <code>.cm</code> file to describe the desired automations:</p> <ul> <li><a href=#manifest><code>manifest</code></a></li> <li><a href=#config><code>config</code></a></li> <li><a href=#triggers><code>triggers</code></a></li> <li><a href=#automations><code>automations</code></a></li> </ul> <h4 id=manifest><code>manifest</code></h4> <p>The first section in a <code>gitstream.cm</code> file is the <code>manifest</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>manifest</span><span class=p>:</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</code></pre></div> <p>The only field required is <code>version</code>.</p> <table> <thead> <tr> <th>Key</th> <th>Required</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>manifest</code></td> <td>Y</td> <td>Map</td> <td>The manifest section root</td> </tr> <tr> <td><code>manifest.version</code></td> <td>Y</td> <td>String</td> <td>Specify the <code>.cm</code> spec version: 0.1, 1.0</td> </tr> </tbody> </table> <p>The manifest version field is used to parse the <code>.cm</code> file, in the future if breaking changes are introduced to the parser then older automation will be still supported.</p> <h4 id=config><code>config</code></h4> <p>The <code>config</code> section in the <code>.cm</code> file is optional and specifies settings that affect gitStream's operation within a given context.</p> <table> <thead> <tr> <th>Key</th> <th>Type</th> <th>Default</th> <th>Scope</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>config</code></td> <td>Map</td> <td>-</td> <td>per <code>.cm</code> file</td> <td>Root configuration section, applies to the automations defined in the current file.</td> </tr> <tr> <td><code>config.admin.users</code></td> <td>[String]</td> <td><code>[]</code></td> <td><code>gitstream.cm</code></td> <td>List of admin users, identified by Git provider usernames.</td> </tr> <tr> <td><code>config.git_history_since</code></td> <td>String</td> <td>-</td> <td>per <code>.cm</code> file</td> <td>Limit git history analysis to commits after the specified date (YYYY-MM-DD).</td> </tr> <tr> <td><code>config.ignore_files</code></td> <td>[String]</td> <td><code>[]</code></td> <td>per <code>.cm</code> file</td> <td>Files to exclude from consideration.</td> </tr> <tr> <td><code>config.user_mapping</code></td> <td>[String: String]</td> <td><code>[]</code></td> <td>per <code>.cm</code> file</td> <td>Map Git user details to provider account names.</td> </tr> </tbody> </table> <h5 id=configadminusers><code>config.admin.users</code></h5> <p>When specified in <code>gitstream.cm</code>, the <code>config.admin.users</code> allows adding admin rights. When a PR changes the <code>*.cm</code> files only, if the user is listed in <code>config.admin.users</code>, the PR will be approved by gitStream. Furthermore, if an admin is defined, they will automatically be requested to review changes in PRs that change rules files and will also be set as a required reviewer, meaning gitStream will block the merge until the admin approves the PR.</p> <p>For example, setting <code>popeye</code> as admin:</p> <div class=highlight><span class=filename>example</span><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>config</span><span class=p>:</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>admin</span><span class=p>:</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=nt>users</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&#39;popeye&#39;</span><span class="p p-Indicator">]</span>
</code></pre></div> <p>This configuration is valid only when used in <code>.cm/gitstream.cm</code>, when defined in other <code>.cm</code> files this configuration is ignored.</p> <p>When you add a user to <code>config.admin.users</code> in your organization's <code>cm</code> repository, they are granted administrative privileges to CM changes across <strong>every repository</strong> in the organization. gitStream evaluates CM rules in the individual repository <strong>and</strong> your organization's <code>cm</code> repository to determine admin users.</p> <p>When you add a user to <code>config.admin.users</code> in your repository's <code>.cm/gitstream.cm</code> file, they are granted administrative privileges to CM changes within that specific repository. However, if an organization-level admin is already defined in your organization's <code>cm</code> repository, then the organization-level admin approval is required for that change to take effect.</p> <h5 id=configignore_files><code>config.ignore_files</code></h5> <p>The <code>config.ignore_files</code> supports glob pattern matching that contains a list of files to ignore.</p> <p>Common usage, since some files such as lock files are intentionally not a required part of a review, they would not want to them to be counted in the estimated review time. In such cases, you can add <code>config.ignore_files</code> to the relevant CM file, for example:</p> <div class=highlight><span class=filename>example</span><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>config</span><span class=p>:</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>ignore_files</span><span class=p>:</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;yarn.lock&#39;</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;package-lock.json&#39;</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;openapi.json&#39;</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;ui/src/**/*Model.d.ts&#39;</span>
</code></pre></div> <h5 id=configuser_mapping><code>config.user_mapping</code></h5> <p>Accepts list of key value strings.</p> <p>For example, when using <code>rankByGitBlame</code> or <code>explainRankByGitBlame</code> Git users are mapped to their matching Git provider accounts based on the Git details. The automatic mapping can sometimes result with the wrong account or fail to find a proper mapping, in these cases you can configure the <code>config.user_mapping</code>. This allows you to map confusing Git user into their specific accounts and dump some irrelevant accounts:</p> <div class=highlight><span class=filename>example</span><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>config</span><span class=p>:</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nt>user_mapping</span><span class=p>:</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;Popeye</span><span class=nv> </span><span class=s>Man</span><span class=nv> </span><span class=s>&lt;popeye@invalid.com&gt;&#39;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&#39;popeye-the-salyor-man&#39;</span><span class=w> </span><span class=c1># (1)</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;Popeye</span><span class=nv> </span><span class=s>Man</span><span class=nv> </span><span class=s>&lt;popeye2@invalid.com&gt;&#39;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&#39;popeye-the-salyor-man&#39;</span><span class=w> </span><span class=c1># (2)</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;olive</span><span class=nv> </span><span class=s>&lt;olive@invalid.com&gt;&#39;</span><span class="p p-Indicator">:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class=w> </span><span class=c1># (3)</span>
</code></pre></div> <ol> <li>Map Git user signature to the correct Git provider user name (e.g. GitHub)</li> <li>Map Git user signature to the correct Git provider user name (e.g. GitHub)</li> <li>Mapping to <code>null</code> removes this Git user from the suggested results</li> </ol> <p>When using <code>rankByGitBlame</code> to assign reviewers automatically with <code>add-reviewers@v1</code> then mapping users to <code>null</code> is a way to prevent the automatic mapping in certain cases, like in your example contributors that are not longer part of the team.</p> <p>On the other hand, when using <code>explainRankByGitBlame</code> with <code>add-comment@v1</code> it still shows these users details in the PR comment suggestion as this info might be valuable by itself.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-reviewers@v1</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=c1># (1)</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=nt>reviewers</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>rankByGitBlame</span><span class=o>(</span><span class=nv>gt</span><span class=o>=</span><span class=m>25</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-comment@v1</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>  </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=c1># (2)</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>      </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>explainRankByGitBlame</span><span class=o>(</span><span class=nv>gt</span><span class=o>=</span><span class=m>25</span><span class=o>)</span> <span class=cp>}}</span>
</code></pre></div> <ol> <li><code>rankByGitBlame</code> will drop <code>null</code> users</li> <li><code>explainRankByGitBlame</code> will NOT drop <code>null</code> users</li> </ol> <h5 id=configgit_history_since><code>config.git_history_since</code></h5> <p>The <code>config.git_history_since</code> configuration limits how far back gitStream looks in git history when analyzing code expertise and git blame results. This affects filters and actions that rely on git history analysis, including:</p> <ul> <li><code>codeExperts</code> filter</li> <li><code>rankByGitBlame</code> filter </li> <li><code>explainRankByGitBlame</code> filter</li> <li><code>explain-code-experts</code> action</li> </ul> <p>When <code>git_history_since</code> is configured, gitStream will only consider commits made on or after the specified date when determining code experts and calculating git blame rankings. This is particularly useful for:</p> <ul> <li><strong>Team transitions</strong>: When a project changes hands between teams, you can set the date to when the new team took over to ensure only current team members are suggested as reviewers</li> <li><strong>Performance optimization</strong>: Large repositories with extensive history can benefit from limiting the analysis scope</li> <li><strong>Relevant expertise</strong>: Focus on recent contributions rather than legacy code changes</li> </ul> <p>The value should be specified as a date in <code>YYYY-MM-DD</code> format.</p> <div class=highlight><span class=filename>example</span><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>config</span><span class=p>:</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=nt>git_history_since</span><span class=p>:</span><span class=w> </span><span class=s>&#39;2025-01-01&#39;</span><span class=w>  </span><span class=c1># Only consider commits from January 1, 2025 onwards</span>
</code></pre></div> <p><strong>Example use case</strong>: If your team took over a project on January 1, 2025, and you want to ensure that only current team members are suggested as code experts:</p> <div class=highlight><span class=filename>.cm/gitstream.cm</span><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>config</span><span class=p>:</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>git_history_since</span><span class=p>:</span><span class=w> </span><span class=s>&#39;2025-01-01&#39;</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>  </span><span class=nt>assign_code_experts</span><span class=p>:</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>files | codeExperts(gt=10) | length &gt; 0</span><span class=w> </span><span class="p p-Indicator">}}</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-reviewers@v1</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>          </span><span class=nt>reviewers</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>files | codeExperts(gt=10)</span><span class=w> </span><span class="p p-Indicator">}}</span>
</code></pre></div> <p>With this configuration, the <code>codeExperts</code> filter will only analyze git blame data from commits made on or after January 1, 2025, effectively filtering out previous team members from reviewer suggestions.</p> <h4 id=triggers><code>triggers</code></h4> <p>The <code>triggers</code> is section specifies when automations are executed, supporting <code>include</code> and <code>exclude</code> lists for branch and repository patterns at the file level. The <code>on</code> keyword can also be used within individual automations to define specific events that trigger those automations.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>triggers</span><span class=p>:</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>on</span><span class=p>:</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pr_created</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">commit</span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>  </span><span class=nt>exclude</span><span class=p>:</span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span><span class=nt>branch</span><span class=p>:</span>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hotfix</span>
</code></pre></div> <p>Read more here: <a href=/execution-model#explicit-triggers>triggers</a>.</p> <h4 id=automations><code>automations</code></h4> <p>The <code>automations</code> section defines the automations and their conditions.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=nt>mark_small_pr</span><span class=p>:</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>checks.size.is.xsmall</span> <span class=cp>}}</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-label@v1</span>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>          </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">xsmall</span>
</code></pre></div> <p>Each automation includes its name, and few fields: <code>if</code> and <code>run</code>.</p> <table> <thead> <tr> <th>Key</th> <th>Required</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>automations</code></td> <td>Y</td> <td>Map</td> <td>The automations section root</td> </tr> <tr> <td><code>automations.NAME</code></td> <td>Y</td> <td>Map</td> <td>User defined name of the automation, can be any string</td> </tr> <tr> <td><code>automations.NAME.if</code></td> <td>Y</td> <td>Map</td> <td>List of conditions with AND relationship</td> </tr> <tr> <td><code>automations.NAME.run</code></td> <td>Y</td> <td>Map</td> <td>Actions to run if all conditions are met, invoked one by one</td> </tr> </tbody> </table> <p>The <code>if</code> field includes the list of conditions. The conditions are checked when a pull request is opened or changed, if all the conditions pass, the automation is executed.</p> <p>The <code>run</code> field includes the automation to execute. It includes the following fields:</p> <table> <thead> <tr> <th>Key</th> <th>Required</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>action</code></td> <td>Y</td> <td>String</td> <td>The action pointer</td> </tr> <tr> <td><code>engine</code></td> <td>N</td> <td>String</td> <td>The action engine, default is <code>gitstream</code></td> </tr> <tr> <td><code>args</code></td> <td>N</td> <td>List</td> <td>The action inputs list</td> </tr> </tbody> </table> <p>For <code>gitstream</code> engine, the action is specified by: <code>name@version</code></p> <p>gitStream supported actions, see <a href=/automation-actions>actions</a>.</p> <h3 id=reusing-checks>Reusing checks</h3> <p>You can define an accessory section, e.g. <code>checks</code>, that defines common conditions, and reuse.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nt>size</span><span class=p>:</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nt>is</span><span class=p>:</span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=nt>small</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>branch.diff.size</span> <span class=o>&lt;</span> <span class=m>20</span> <span class=cp>}}</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span><span class=nt>medium</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>branch.diff.size</span> <span class=o>&gt;=</span> <span class=m>20</span> <span class=k>and</span> <span class=nv>branch.diff.size</span> <span class=o>&lt;</span> <span class=m>100</span> <span class=cp>}}</span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>    </span><span class=nt>large</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>branch.diff.size</span> <span class=o>&gt;=</span> <span class=m>100</span> <span class=cp>}}</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>  </span><span class=nt>approve_small</span><span class=p>:</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>size.is.small</span> <span class=cp>}}</span>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">approve@v1</span>
<a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=w>  </span><span class=nt>mark_small_medium</span><span class=p>:</span>
<a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=w>      </span><span class=c1># Check that the PR is either small or medium size</span>
<a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>size.is.small</span> <span class=k>or</span> <span class=nv>size.is.medium</span> <span class=cp>}}</span>
<a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=w>      </span><span class=c1># AND its less than 5 minutes review (estimated)</span>
<a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>branch</span> <span class=o>|</span> <span class=nf>estimatedReviewTime</span> <span class=o>&lt;=</span> <span class=m>5</span> <span class=cp>}}</span>
<a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-label@v1</span>
<a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=w>          </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s>&#39;good-size&#39;</span>
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 LinearB, Inc. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/linear-b/gitstream/ target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["header.autohide", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.ce72ebac.min.js></script> </body> </html>