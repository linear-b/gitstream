<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Filter Functions enable you to process data that gitStream extracts."><meta name=author content=LinearB><link href=../context-variables/ rel=prev><link href=../automation-actions/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.1.0"><title>gitStream Reference - Filter Functions - gitStream Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.402914a4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.a0c5b2b5.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-WE4YLK8TT5"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-WE4YLK8TT5",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-WE4YLK8TT5",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#filter-functions class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="gitStream Documentation" class="md-header__button md-logo" aria-label="gitStream Documentation" data-md-component=logo> <img src=../assets/gitstream-w.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> gitStream Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> gitStream Reference - Filter Functions </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/linear-b/gitstream title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> linear-b/gitstream </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="gitStream Documentation" class="md-nav__button md-logo" aria-label="gitStream Documentation" data-md-component=logo> <img src=../assets/gitstream-w.webp alt=logo> </a> gitStream Documentation </label> <div class=md-nav__source> <a href=https://github.com/linear-b/gitstream title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> linear-b/gitstream </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../github-installation/ class=md-nav__link> GitHub Setup </a> </li> <li class=md-nav__item> <a href=../custom-github-app/ class=md-nav__link> GitHub Server (Custom App) </a> </li> <li class=md-nav__item> <a href=../gitlab-installation/ class=md-nav__link> GitLab Setup </a> </li> <li class=md-nav__item> <a href=../bitbucket-installation/ class=md-nav__link> Bitbucket Cloud Setup </a> </li> <li class=md-nav__item> <a href=../managed-mode/ class=md-nav__link> Managed Mode </a> </li> <li class=md-nav__item> <a href=../how-it-works/ class=md-nav__link> How gitStream works </a> </li> <li class=md-nav__item> <a href=../quick-start/ class=md-nav__link> Your First Automation </a> </li> <li class=md-nav__item> <a href=../dry-run-mode/ class=md-nav__link> How to Test Your Automations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../automations/automation-library/ class=md-nav__link> Automation Library </a> </li> <li class=md-nav__item> <a href=../integrations/ class=md-nav__link> Integrations </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cm-file/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../execution-model/ class=md-nav__link> Trigger Control </a> </li> <li class=md-nav__item> <a href=../limits/ class=md-nav__link> Automation Limits </a> </li> <li class=md-nav__item> <a href=../context-variables/ class=md-nav__link> Context variables </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Filter functions <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Filter functions </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#low-level-functions class=md-nav__link> Low level functions </a> </li> <li class=md-nav__item> <a href=#high-level-functions class=md-nav__link> High level functions </a> </li> <li class=md-nav__item> <a href=#named-arguments class=md-nav__link> Named arguments </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> <nav class=md-nav aria-label=Reference> <ul class=md-nav__list> <li class=md-nav__item> <a href=#capture class=md-nav__link> capture </a> </li> <li class=md-nav__item> <a href=#difference class=md-nav__link> difference </a> </li> <li class=md-nav__item> <a href=#every class=md-nav__link> every </a> </li> <li class=md-nav__item> <a href=#filter class=md-nav__link> filter </a> </li> <li class=md-nav__item> <a href=#includes class=md-nav__link> includes </a> </li> <li class=md-nav__item> <a href=#intersection class=md-nav__link> intersection </a> </li> <li class=md-nav__item> <a href=#map class=md-nav__link> map </a> </li> <li class=md-nav__item> <a href=#match class=md-nav__link> match </a> </li> <li class=md-nav__item> <a href=#nope class=md-nav__link> nope </a> </li> <li class=md-nav__item> <a href=#reject class=md-nav__link> reject </a> </li> <li class=md-nav__item> <a href=#some class=md-nav__link> some </a> </li> <li class=md-nav__item> <a href=#alldocs class=md-nav__link> allDocs </a> </li> <li class=md-nav__item> <a href=#allimages class=md-nav__link> allImages </a> </li> <li class=md-nav__item> <a href=#alltests class=md-nav__link> allTests </a> </li> <li class=md-nav__item> <a href=#checkdependabot class=md-nav__link> checkDependabot </a> </li> <li class=md-nav__item> <a href=#checksemver class=md-nav__link> checkSemver </a> </li> <li class=md-nav__item> <a href=#codeexperts class=md-nav__link> codeExperts </a> </li> <li class=md-nav__item> <a href=#decode class=md-nav__link> decode </a> </li> <li class=md-nav__item> <a href=#encode class=md-nav__link> encode </a> </li> <li class=md-nav__item> <a href=#estimatedreviewtime class=md-nav__link> estimatedReviewTime </a> </li> <li class=md-nav__item> <a href=#extensions class=md-nav__link> extensions </a> </li> <li class=md-nav__item> <a href=#extractjitfindings class=md-nav__link> extractJitFindings </a> </li> <li class=md-nav__item> <a href=#extractsonarfindings class=md-nav__link> extractSonarFindings </a> </li> <li class=md-nav__item> <a href=#explainrankbygitblame class=md-nav__link> explainRankByGitBlame </a> </li> <li class=md-nav__item> <a href=#isfirstcommit class=md-nav__link> isFirstCommit </a> </li> <li class=md-nav__item> <a href=#isformattingchange class=md-nav__link> isFormattingChange </a> </li> <li class=md-nav__item> <a href=#maptoenum class=md-nav__link> mapToEnum </a> </li> <li class=md-nav__item> <a href=#matchdifflines class=md-nav__link> matchDiffLines </a> </li> <li class=md-nav__item> <a href=#rankbygitactivity class=md-nav__link> rankByGitActivity </a> </li> <li class=md-nav__item> <a href=#rankbygitblame class=md-nav__link> rankByGitBlame </a> </li> <li class=md-nav__item> <a href=#readfile class=md-nav__link> readFile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../automation-actions/ class=md-nav__link> Automation actions </a> </li> <li class=md-nav__item> <a href=../user-commands/ class=md-nav__link> User commands </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> Plugins <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../plugins/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../plugins-for-developers/ class=md-nav__link> Plugins Development </a> </li> <li class=md-nav__item> <a href=../filter-function-plugins/ class=md-nav__link> Filter Functions Plugins List </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../gitStream-playground/ class=md-nav__link> Playground </a> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=https://app.gitstream.cm/login class=md-nav__link> Login </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#low-level-functions class=md-nav__link> Low level functions </a> </li> <li class=md-nav__item> <a href=#high-level-functions class=md-nav__link> High level functions </a> </li> <li class=md-nav__item> <a href=#named-arguments class=md-nav__link> Named arguments </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> <nav class=md-nav aria-label=Reference> <ul class=md-nav__list> <li class=md-nav__item> <a href=#capture class=md-nav__link> capture </a> </li> <li class=md-nav__item> <a href=#difference class=md-nav__link> difference </a> </li> <li class=md-nav__item> <a href=#every class=md-nav__link> every </a> </li> <li class=md-nav__item> <a href=#filter class=md-nav__link> filter </a> </li> <li class=md-nav__item> <a href=#includes class=md-nav__link> includes </a> </li> <li class=md-nav__item> <a href=#intersection class=md-nav__link> intersection </a> </li> <li class=md-nav__item> <a href=#map class=md-nav__link> map </a> </li> <li class=md-nav__item> <a href=#match class=md-nav__link> match </a> </li> <li class=md-nav__item> <a href=#nope class=md-nav__link> nope </a> </li> <li class=md-nav__item> <a href=#reject class=md-nav__link> reject </a> </li> <li class=md-nav__item> <a href=#some class=md-nav__link> some </a> </li> <li class=md-nav__item> <a href=#alldocs class=md-nav__link> allDocs </a> </li> <li class=md-nav__item> <a href=#allimages class=md-nav__link> allImages </a> </li> <li class=md-nav__item> <a href=#alltests class=md-nav__link> allTests </a> </li> <li class=md-nav__item> <a href=#checkdependabot class=md-nav__link> checkDependabot </a> </li> <li class=md-nav__item> <a href=#checksemver class=md-nav__link> checkSemver </a> </li> <li class=md-nav__item> <a href=#codeexperts class=md-nav__link> codeExperts </a> </li> <li class=md-nav__item> <a href=#decode class=md-nav__link> decode </a> </li> <li class=md-nav__item> <a href=#encode class=md-nav__link> encode </a> </li> <li class=md-nav__item> <a href=#estimatedreviewtime class=md-nav__link> estimatedReviewTime </a> </li> <li class=md-nav__item> <a href=#extensions class=md-nav__link> extensions </a> </li> <li class=md-nav__item> <a href=#extractjitfindings class=md-nav__link> extractJitFindings </a> </li> <li class=md-nav__item> <a href=#extractsonarfindings class=md-nav__link> extractSonarFindings </a> </li> <li class=md-nav__item> <a href=#explainrankbygitblame class=md-nav__link> explainRankByGitBlame </a> </li> <li class=md-nav__item> <a href=#isfirstcommit class=md-nav__link> isFirstCommit </a> </li> <li class=md-nav__item> <a href=#isformattingchange class=md-nav__link> isFormattingChange </a> </li> <li class=md-nav__item> <a href=#maptoenum class=md-nav__link> mapToEnum </a> </li> <li class=md-nav__item> <a href=#matchdifflines class=md-nav__link> matchDiffLines </a> </li> <li class=md-nav__item> <a href=#rankbygitactivity class=md-nav__link> rankByGitActivity </a> </li> <li class=md-nav__item> <a href=#rankbygitblame class=md-nav__link> rankByGitBlame </a> </li> <li class=md-nav__item> <a href=#readfile class=md-nav__link> readFile </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/linear-b/gitstream/edit/main/docs/filter-functions.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=filter-functions>Filter functions</h1> <p>Filters can change the look and format of the source data, or even generate new data derived from the input values. What's important is that the original data is replaced by the result of transformations, and that's what ends up in rendered templates.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li>Items marked with <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 8.807V3.5h-.563a.75.75 0 0 1 0-1.5h9.125a.75.75 0 0 1 0 1.5H16v5.307l5.125 9.301c.964 1.75-.302 3.892-2.299 3.892H5.174c-1.998 0-3.263-2.142-2.3-3.892ZM4.189 18.832a1.123 1.123 0 0 0 .985 1.668h13.652a1.123 1.123 0 0 0 .985-1.668L17.7 15H6.3ZM14.5 3.5h-5V9a.75.75 0 0 1-.093.362L7.127 13.5h9.746l-2.28-4.138A.75.75 0 0 1 14.5 9Z"/></svg></span> are under development and are not available yet.</li> <li>Items marked with <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M16.23 18 12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/></svg></span> are available exclusively for paid accounts. To unlock this feature, <a href=https://linearb.io/book-a-demo>contact our sales team</a>.</li> </ul> </div> <h2 id=overview>Overview</h2> <p>The following functions are supported in addition to the built-in functions provided by <a href=https://mozilla.github.io/nunjucks/templating.html#builtin-filters>Nunjucks</a>.</p> <h3 id=low-level-functions>Low level functions</h3> <div class=big-summary> <table> <thead> <tr> <th>Function</th> <th>Input</th> <th>Args</th> <th>Output</th> </tr> </thead> <tbody> <tr> <td><a href=#capture><code>capture</code></a><br>Find and return the first occurrence of a regex in the input string</td> <td>String</td> <td><code>regex</code></td> <td>String</td> </tr> <tr> <td><a href=#difference><code>difference</code></a><br>Given two lists, keep only items that are in the 1st list but not in the 2nd.</td> <td>[Objects]</td> <td><code>list</code></td> <td>[Objects]</td> </tr> <tr> <td><a href=#every><code>every</code></a><br>Checks whether all elements in the list are <code>true</code></td> <td>[Bool]</td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#filter><code>filter</code></a><br>Reduce list of items into a list of same items that match the specified term</td> <td>[String]<br>[Object]</td> <td><code>regex</code>, <code>term</code>, <code>list</code>, <code>attr</code></td> <td>[String]<br>[Object]</td> </tr> <tr> <td><a href=#match><code>includes</code></a><br>Check if substring match</td> <td>String</td> <td><code>regex</code>, <code>term</code>, <code>list</code></td> <td>Bool</td> </tr> <tr> <td><a href=#intersection><code>intersection</code></a><br>Given two lists, keep only items that are in both lists.</td> <td>[Objects]</td> <td><code>list</code></td> <td>[Objects]</td> </tr> <tr> <td><a href=#map><code>map</code></a><br>Maps each object in a list into their specified attribute value</td> <td>[Object]</td> <td><code>attr</code></td> <td>[Object]</td> </tr> <tr> <td><a href=#match><code>match</code></a><br>Maps list of items into a list of booleans that match the specified term</td> <td>[String]<br>[Object]</td> <td><code>regex</code>, <code>term</code>, <code>list</code> <code>attr</code></td> <td>[Bool]</td> </tr> <tr> <td><a href=#nope><code>nope</code></a><br>Checks whether all elements in the list are <code>false</code></td> <td>[Bool]</td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#reject><code>reject</code></a><br>Inverse of <a href=#filter><code>filter</code></a>, the result list contains non-matching items</td> <td>[String]<br>[Object]</td> <td><code>regex</code>, <code>term</code>, <code>list</code>, <code>attr</code></td> <td>[String]<br>[Object]</td> </tr> <tr> <td><a href=#some><code>some</code></a><br>Checks whether at least one element in the list is <code>true</code></td> <td>[Bool]</td> <td>-</td> <td>Bool</td> </tr> </tbody> </table> </div> <h3 id=high-level-functions>High level functions</h3> <div class=big-summary> <table> <thead> <tr> <th>Function</th> <th>Input</th> <th>Args</th> <th>Output</th> </tr> </thead> <tbody> <tr> <td><a href=#alldocs><code>allDocs</code></a><br>Checks if the list includes only documents</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#allimages><code>allImages</code></a><br>Checks the list includes only images</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#alltests><code>allTests</code></a><br>Checks the list includes only tests</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#checkdependabot><code>checkDependabot</code></a><br>Extract version bump information from Dependabot PRs description</td> <td>String - PR description</td> <td>-</td> <td>[String]</td> </tr> <tr> <td><a href=#checksemver><code>checkSemver</code></a><br>Compare two software version numbers and determine the type of version change</td> <td>[String] - Array with [to, from] versions</td> <td><code>lexicographical</code>, <code>zeroExtend</code></td> <td>String</td> </tr> <tr> <td><a href=#codeexperts><code>codeExperts</code></a><br>Get list of contributors based on expert reviewer model results</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td><code>gt</code>, <code>lt</code></td> <td>[String]</td> </tr> <tr> <td><a href=#decode><code>decode</code></a><br>Decode Base64 encoded string into an object</td> <td>String (Base64 encoded)</td> <td>-</td> <td>Object</td> </tr> <tr> <td><a href=#encode><code>encode</code></a><br>Encode data into Base64 encoded string</td> <td>Object</td> <td>-</td> <td>String (Base64 encoded)</td> </tr> <tr> <td><a href=#estimatedreviewtime><code>estimatedReviewTime</code></a><br>Estimated review time in minutes</td> <td><a href=../context-variables/#branch><code>branch</code></a></td> <td>-</td> <td>Integer</td> </tr> <tr> <td><a href=#extensions><code>extensions</code></a><br>Lists all the unique file extensions</td> <td>[String]</td> <td>-</td> <td>[String]</td> </tr> <tr> <td><a href=#extractjitfindings><code>extractJitFindings</code></a> <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span> <br>Get an object with a summary of the findings found by the Jit scan</td> <td><a href=../context-variables/#pr><code>pr</code></a></td> <td>-</td> <td>Object</td> </tr> <tr> <td><a href=#extractsonarfindings><code>extractSonarFindings</code></a> <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span> <br>Get an object with a summary of the findings found by the SonarCloud scan</td> <td><a href=../context-variables/#pr><code>pr</code></a></td> <td>-</td> <td>Object</td> </tr> <tr> <td><a href=#explainrankbygitblame><code>explainRankByGitBlame</code></a><br>Short markdown text explaining rankByGitBlame results</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td><code>gt</code>, <code>lt</code></td> <td>[String]</td> </tr> <tr> <td><a href=#isfirstcommit><code>isFirstCommit</code></a><br>Checks if it's the author's first commit in the repo</td> <td><a href=../context-variables/#repo><code>repo.contributors</code></a></td> <td>String</td> <td>Bool</td> </tr> <tr> <td><a href=#isformattingchange><code>isFormattingChange</code></a><br>Checks that only formatting changed</td> <td>[<a href=../context-variables/#filediff-structure><code>FileDiff</code> </a>]</td> <td>-</td> <td>Bool</td> </tr> <tr> <td><a href=#maptoenum><code>mapToEnum</code></a><br>return the enum value that matches the input key</td> <td>String</td> <td>Enum object</td> <td>Object</td> </tr> <tr> <td><a href=#matchdifflines><code>matchDiffLines</code></a><br>Match every line in diff</td> <td>[<a href=../context-variables/#filediff-structure><code>FileDiff</code> </a>]</td> <td><code>regex</code>, <code>ignoreWhiteSpaces</code></td> <td>[Bool]</td> </tr> <tr> <td><a href=#rankbygitactivity><code>rankByGitActivity</code></a><br>Get list of contributors based on <code>git-commit</code> activity</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td><code>gt</code>, <code>lt</code></td> <td>[String]</td> </tr> <tr> <td><a href=#rankbygitblame><code>rankByGitBlame</code></a><br>Get list of contributors based on <code>git-blame</code> results</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td><code>gt</code>, <code>lt</code></td> <td>[String]</td> </tr> <tr> <td><a href=#readfile><code>readFile</code></a><br>Reads the contents of a file from the current branch or "cm" folder</td> <td>String - The file path</td> <td>String (optional) - the file type. <code>txt</code> or <code>json</code></td> <td>String</td> </tr> </tbody> </table> </div> <h3 id=named-arguments>Named arguments</h3> <p>Some functions support named arguments, many of these repeat in different functions.</p> <p><code>term</code> - a single string, used as a substring to match with the matched item.</p> <p><code>list</code> - a list of strings, trying to match any of the listed substrings with the matched item.</p> <p><code>regex</code> - a single string, used as a <em>regular expression</em> with the matched item. A regular expression can be created just like JavaScript, but needs to be prefixed with r, for example, <code>r/^foo.*/g</code>, for more info see <a href=https://mozilla.github.io/nunjucks/templating.html#regular-expressions>Nunjucks</a>.</p> <p><code>attr</code> - a key in the element to use when doing the requested operation.</p> <p>For example, the following expressions provide an identical result:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>^</span><span class=nv>some</span><span class=err>.</span><span class=o>*/)</span> <span class=cp>}}</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s1>&#39;some&#39;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;some&#39;</span><span class=o>])</span> <span class=cp>}}</span>
</code></pre></div> <h2 id=reference>Reference</h2> <h4 id=capture><code>capture</code></h4> <p>Extract the first match of the regex in the input string. If no match is found, the function returns an empty string.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>The string to find the match in</td> </tr> <tr> <td><code>regex</code></td> <td>Input</td> <td>String</td> <td>Search term to match with the input string</td> </tr> <tr> <td>-</td> <td>Output</td> <td>String</td> <td>The first substring that matches the provided regex</td> </tr> </tbody> </table> </div> <p>For example, the following line will extract the substring "hello wo" from the input</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=cp>{{</span> <span class=s2>&quot;hello world&quot;</span> <span class=o>|</span> <span class=nf>capture</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>he</span><span class=err>.</span><span class=o>+</span><span class=nv>o</span><span class=o>/)</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=difference><code>difference</code></h4> <p>Given two lists, keep only items that are in the 1st list but not in the 2nd.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Objects]</td> <td>List of objects to inspect.</td> </tr> <tr> <td>list</td> <td>Input</td> <td>[Objects]</td> <td>List of objects to exclude.</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Objects]</td> <td>Returns a list of objects containing items that exist in one input, but not in the other.</td> </tr> </tbody> </table> </div> <h4 id=every><code>every</code></h4> <p>Checks whether all elements in the list areÂ <code>true</code>. In case the list of elements is empty, it will return <code>false</code>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Bool]</td> <td>List of booleans</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td>Returns <code>true</code> when all list items are <code>true</code></td> </tr> </tbody> </table> </div> <p>For example, check that all changes are in either 'src' or 'dest' directories:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;src&#39;</span><span class=o>,</span> <span class=s1>&#39;dest&#39;</span><span class=o>])</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=filter><code>filter</code></h4> <p>Creates a shallow copy of a portion of a given list, filtered down to just the elements that match the given term. You can use either a single term, regex, or a list of terms to match with.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[String]<br>[Object]</td> <td>The list of strings to match, or list of objects if <code>attr</code> is used</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Search term to match with the input items</td> </tr> <tr> <td><code>attr</code></td> <td>Input (optional)</td> <td>String</td> <td>match a named attribute in the input object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]<br>[Object]</td> <td>The list with only the matching items</td> </tr> </tbody> </table> </div> <p>Examples: Check if all changes to JavaScript files are in the tests directory:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>filter</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=nv>.js</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>tests</span><span class=err>\</span><span class=o>//)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <p>Check if all changes to JavaScript files are formatting:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>filter</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;new_file&#39;</span><span class=o>,</span> <span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=nv>.js</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>isFormattingChange</span> <span class=cp>}}</span>
</code></pre></div> <p>Check if the PR has new Python files: <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=cp>{{</span> <span class=nv>branch.diff.files_metadata</span> <span class=o>|</span> <span class=nf>filter</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;original_file&#39;</span><span class=o>,</span> <span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>^$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>filter</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;new_file&#39;</span><span class=o>,</span> <span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=nv>.py</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div></p> <h4 id=includes><code>includes</code></h4> <p>Determines whether a string includes a certain substring. You can use either a single term, regex, or a list of terms to match with.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>The string you want to check for matching substrings</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Substring term to match</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if search terms matches</td> </tr> </tbody> </table> </div> <p>Check string matches either of the terms:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=cp>{{</span> <span class=s1>&#39;something&#39;</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;any&#39;</span><span class=o>,</span> <span class=s1>&#39;thing&#39;</span><span class=o>])</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=intersection><code>intersection</code></h4> <p>Given two lists, keep only items that are in both lists.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Objects]</td> <td>List of objects to inspect.</td> </tr> <tr> <td>list</td> <td>Input</td> <td>[Objects]</td> <td>List of objects to check for intersection.</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Objects]</td> <td>Returns a list of objects containing items that intersect between the two lists.</td> </tr> </tbody> </table> </div> <h4 id=map><code>map</code></h4> <p>Creates a new list populated with the values of the selected attribute of every element in the input list.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Object]</td> <td>The list of objects to map, see <a href=/context-variables>context</a> for valid inputs</td> </tr> <tr> <td><code>attr</code></td> <td>Input</td> <td>String</td> <td>Object attribute to select</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Object]</td> <td>List of the selected object attributes</td> </tr> </tbody> </table> </div> <p>For example, the <code>source.diff.files</code> context holds a list of <a href=../context-variables/#filediff-structure><code>FileDiff</code> </a>, each has <code>new_file</code> attribute. You can create a list of all the new file names by mapping to the <code>new_file</code> attribute and then check if there are changes to any <code>handler.js</code> file:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>map</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;new_file&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s1>&#39;handler.js&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=match><code>match</code></h4> <p>Return <code>true</code> for each element in the list that match the search term.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[String]<br>[Object]</td> <td>The list of strings or if <code>attr</code> used the list of objects</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Search term to match</td> </tr> <tr> <td><code>attr</code></td> <td>Input</td> <td>String</td> <td>match a named attribute in the input object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Bool]</td> <td><code>true</code> for every matching item</td> </tr> </tbody> </table> </div> <p>Examples:</p> <p>Check if all code changes are in the <code>tests</code> directory:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>tests</span><span class=err>\</span><span class=o>//)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <p>Check if there are code changes with specific function call:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;diff&#39;</span><span class=o>,</span> <span class=nv>term</span><span class=o>=</span><span class=s1>&#39;myFunction&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=nope><code>nope</code></h4> <p>The inverse of <a href=#every><code>every</code></a>, checks whether all elements in the list areÂ <code>false</code>. In case the list of elements is empty, it will return <code>true</code>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Bool]</td> <td>List of booleans</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td>Returns <code>true</code> when all list items are <code>false</code></td> </tr> </tbody> </table> </div> <p>For example, check that no changes in either 'src' or 'dest' directories:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;src&#39;</span><span class=o>,</span> <span class=s1>&#39;dest&#39;</span><span class=o>])</span> <span class=o>|</span> <span class=nf>nope</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=reject><code>reject</code></h4> <p>Creates a shallow copy of a portion of a given list, filtered down to just the elements that do <strong>not</strong> match the given term. You can use either a single term, regex, or a list of terms to match with.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[String]<br>[Object]</td> <td>The list of strings to match, or list of objects if <code>attr</code> is used</td> </tr> <tr> <td><code>term</code><br><code>regex</code><br><code>list</code></td> <td>Input (either)</td> <td>String<br>String<br>[String]</td> <td>Search term to match with the input items</td> </tr> <tr> <td><code>attr</code></td> <td>Input (optional)</td> <td>String</td> <td>match a named attribute in the input object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]<br>[Object]</td> <td>The list with only the non-matching items</td> </tr> </tbody> </table> </div> <p>Examples:</p> <p>Check if all changes, but JavaScript files are in tests directory:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>reject</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>\</span><span class=nv>.js</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>tests</span><span class=err>\</span><span class=o>//</span><span class=err>&#39;</span><span class=o>)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <p>Check if all changes except for <code>config.json</code> files are formatting:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>reject</span><span class=o>(</span><span class=nv>attr</span><span class=o>=</span><span class=s1>&#39;new_file&#39;</span><span class=o>,</span> <span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>config</span><span class=err>\</span><span class=nv>.json</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>isFormattingChange</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=some><code>some</code></h4> <p>Checks whether any element in the list isÂ <code>true</code>. In case the list of elements is empty it will return <code>false</code>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Bool]</td> <td>List of booleans</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td>Returns <code>true</code> when any of the items is <code>true</code></td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>list</span><span class=o>=[</span><span class=s1>&#39;src&#39;</span><span class=o>,</span> <span class=s1>&#39;dest&#39;</span><span class=o>])</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=alldocs><code>allDocs</code></h4> <p>Return <code>true</code> if the input list includes only documents based on file extensions.</p> <p>Doc files extensions are: <code>md</code>, <code>mkdown</code>, <code>txt</code>, <code>rst</code>, <code>adoc</code>, except for <code>requirements.txt</code>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if all file extensions are of docs</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>allDocs</span> <span class=cp>}}</span>
</code></pre></div> <p>In case you want to exclude more files, like all <code>txt</code> under the <code>requirements</code> directory, add another check:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=cp>{{</span> <span class=o>(</span><span class=nv>files</span> <span class=o>|</span> <span class=nf>allDocs</span><span class=o>)</span> <span class=k>and</span> <span class=o>(</span><span class=nv>files</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=nv>requirements</span><span class=err>\</span><span class=o>/</span><span class=err>.</span><span class=o>*</span><span class=err>\</span><span class=nv>.txt</span><span class=err>$</span><span class=o>/)</span> <span class=o>|</span> <span class=nf>nope</span> <span class=o>)</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=allimages><code>allImages</code></h4> <p>Return <code>true</code> if the input list includes only images based on file extensions.</p> <p>Image file extensions are: <code>svg</code>, <code>png</code>, <code>gif</code>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if all file extensions are of images</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>allImages</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=alltests><code>allTests</code></h4> <p>Return <code>true</code> if the input list includes only tests based on the file's path and name.</p> <p>To identify as test the file must include the word <code>test</code> or <code>spec</code> in its name or path, it is checked using this regex: <code>[^a-zA-Z0-9](spec|test|tests)[^a-zA-Z0-9]</code>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if all file tests are based on name and path</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>allTests</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=checkdependabot><code>checkDependabot</code></h4> <p>Extract version bump information from Dependabot PRs description. This filter parses Dependabot PR descriptions to identify version changes and returns an array containing the "to" and "from" versions.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>The PR description from a Dependabot pull request</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]</td> <td>Array with [to, from] versions, or null if no version info found</td> </tr> </tbody> </table> </div> <p>Examples:</p> <p>Check if a Dependabot PR is a minor version bump and auto-approve:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>  </span><span class=nt>auto_approve_dependabot_minor</span><span class=p>:</span>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>pr.description</span> <span class=o>|</span> <span class=nf>checkDependabot</span> <span class=o>|</span> <span class=nf>checkSemver</span> <span class=o>==</span> <span class=s1>&#39;minor&#39;</span> <span class=cp>}}</span>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>branch.name</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s2>&quot;dependabot&quot;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>branch.author</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s2>&quot;dependabot&quot;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">approve@v1</span>
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-comment@v1</span>
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=w>          </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=w>            </span><span class=no>Dependabot minor version bump approved automatically.</span>
</code></pre></div> <p>Auto-merge patch updates:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=w>  </span><span class=nt>auto_merge_dependabot_patch</span><span class=p>:</span>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>pr.description</span> <span class=o>|</span> <span class=nf>checkDependabot</span> <span class=o>|</span> <span class=nf>checkSemver</span> <span class=o>==</span> <span class=s1>&#39;patch&#39;</span> <span class=cp>}}</span>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>branch.name</span> <span class=o>|</span> <span class=nf>includes</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=s2>&quot;dependabot&quot;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">approve@v1</span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">merge@v1</span>
</code></pre></div> <h4 id=checksemver><code>checkSemver</code></h4> <p>Compare two software version numbers and determine the type of version change. This filter takes an array of two version strings and returns the type of change between them.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[String]</td> <td>Array with [to, from] versions in semver format</td> </tr> <tr> <td><code>lexicographical</code></td> <td>Input (optional)</td> <td>Boolean</td> <td>Compare lexicographically instead of naturally (default: false)</td> </tr> <tr> <td><code>zeroExtend</code></td> <td>Input (optional)</td> <td>Boolean</td> <td>Pad shorter version with zeros (default: true)</td> </tr> <tr> <td>-</td> <td>Output</td> <td>String</td> <td>Returns 'major', 'minor', 'patch', 'downgrade', 'equal', or 'error'</td> </tr> </tbody> </table> </div> <p>Examples:</p> <p>Compare version arrays directly:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=cp>{{</span> <span class=o>[</span><span class=s2>&quot;1.2.3&quot;</span><span class=o>,</span> <span class=s2>&quot;1.2.1&quot;</span><span class=o>]</span> <span class=o>|</span> <span class=nf>checkSemver</span> <span class=cp>}}</span><span class=w>  </span><span class=c1># Returns &quot;patch&quot;</span>
</code></pre></div> <p>Use with Dependabot to classify version bumps:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=nt>bump_type</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>pr.description</span> <span class=o>|</span> <span class=nf>checkDependabot</span> <span class=o>|</span> <span class=nf>checkSemver</span> <span class=cp>}}</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>  </span><span class=nt>handle_major_bump</span><span class=p>:</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>bump_type</span> <span class=o>==</span> <span class=s1>&#39;major&#39;</span> <span class=cp>}}</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-label@v1</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>          </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s>&quot;major-version-bump&quot;</span>
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">request-changes@v1</span>
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=w>          </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Major</span><span class=nv> </span><span class=s>version</span><span class=nv> </span><span class=s>bumps</span><span class=nv> </span><span class=s>require</span><span class=nv> </span><span class=s>manual</span><span class=nv> </span><span class=s>review&quot;</span>
</code></pre></div> <h4 id=codeexperts><code>codeExperts</code></h4> <p>When requesting a review for a pull request, it's important to select a reviewer who has a deep understanding of the relevant code area, the domain problem, and the framework being used. This ensures that the reviewer can provide specific and informed feedback, rather than general comments that may not take into account the context in which the issue was solved.</p> <p>The filter provides the list of most qualified contributors based on <code>git-blame</code> and <code>git-commit</code> results to determine who has been most active in the relevant code area, and then combines this information into a score between 0 and 100. The commit activity is scored higher for recent commits, which ensures that those who are actively contributing to the codebase are given higher priority as potential reviewers. The result will be limited to 2 users and shall not include the PR author.</p> <p>The output lists the Git provider users, e.g., GitHub users, which are mapped from the Git users included in the <code>git-blame</code> output. When gitStream cannot map the Git user to a Git provider user it will be dropped from the output list, hence the list may contain less than 100% of the lines.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <code>codeExperts</code> filter function calls gitStream app API with the <code>repo</code> context to calculate the experts.</p> </div> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td>The <code>repo</code> context variable</td> </tr> <tr> <td><code>lt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those below the specified threshold</td> </tr> <tr> <td><code>gt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those above the specified threshold</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]</td> <td>Up to 2 users, sorted by best match first (it won't include the PR author)</td> </tr> </tbody> </table> </div> <p>For example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=nt>code_experts</span><span class=p>:</span>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-reviewers@v1</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>          </span><span class=nt>reviewers</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>codeExperts</span><span class=o>(</span><span class=nv>gt</span><span class=o>=</span><span class=m>10</span><span class=o>)</span> <span class=cp>}}</span>
</code></pre></div> <div class="admonition tip"> <p class=admonition-title>Limit git history for code experts</p> <p>Use the <a href=../cm-file/#configgit_history_since><code>config.git_history_since</code></a> configuration to limit the git history analysis to commits after a specific date. This is useful for team transitions or when you want to focus on recent contributors only.</p> </div> <h4 id=decode><code>decode</code></h4> <p>Decode Base64 encoded string into an object. Encoded strings are formatted: <code>"base64: &lt;encoded_string&gt;"</code></p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>Base64 encoded string prefixed <code>"Base64: "</code></td> </tr> <tr> <td>-</td> <td>Output</td> <td>Object</td> <td>Decoded objet</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=cp>{{</span> <span class=s2>&quot;base64: SGVsbG8gV29ybGQ=&quot;</span> <span class=o>|</span> <span class=nf>decode</span> <span class=cp>}}</span><span class=w> </span><span class=c1># Output: &quot;Hello World&quot;</span>
</code></pre></div> <h4 id=encode><code>encode</code></h4> <p>Encode data into Base64 encoded string. When an encoded string is passed as input for <a href=../automation-actions/#add-comment><code>add-comment</code></a>, the action automatically detects and decodes it.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>Object</td> <td>The input object to encode</td> </tr> <tr> <td>-</td> <td>Output</td> <td>String (Base64)</td> <td>Base64 encoding of the object</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=cp>{{</span> <span class=s2>&quot;Hello World&quot;</span> <span class=o>|</span> <span class=nf>encode</span> <span class=cp>}}</span><span class=w> </span><span class=c1># Output: &quot;base64: SGVsbG8gV29ybGQ=&quot;</span>
</code></pre></div> <h4 id=estimatedreviewtime><code>estimatedReviewTime</code></h4> <p>Returns the estimated review time in minutes based on an ML model. The model estimation is computed based on the PR metadata data (e.g. branch name, commits) and mainly by the number of additions and deletions for each type of change (Code, Data, Configuration, etc..)</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <code>estimatedReviewTime</code> filter function calls gitStream app API with the <code>branch</code> context to calculate the estimated review time value.</p> </div> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#branch><code>branch</code></a></td> <td>Branch meta data</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Integer</td> <td>the estimated time for review in minutes</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=cp>{{</span> <span class=nv>branch</span> <span class=o>|</span> <span class=nf>estimatedReviewTime</span> <span class=cp>}}</span>
</code></pre></div> <p>The following files are automatically excluded from the estimated review time calculation.</p> <table> <thead> <tr> <th>File type</th> <th>Filter type</th> <th>Values</th> </tr> </thead> <tbody> <tr> <td>Data</td> <td>Extension</td> <td><code>ini</code> <code>csv</code> <code>xls</code> <code>xlsx</code> <code>xlr</code> <code>doc</code> <code>docx</code> <code>txt</code> <code>pps</code> <code>ppt</code> <code>pptx</code> <code>dot</code> <code>dotx</code> <code>log</code> <code>tar</code> <code>rtf</code> <code>dat</code> <code>ipynb</code> <code>po</code> <code>profile</code> <code>object</code> <code>obj</code> <code>dxf</code> <code>twb</code> <code>bcsymbolmap</code> <code>tfstate</code> <code>pdf</code> <code>rbi</code> <code>pem</code> <code>crt</code> <code>svg</code> <code>png</code> <code>jpeg</code> <code>jpg</code> <code>ttf</code></td> </tr> <tr> <td>Data</td> <td>Regex</td> <td><code>.*dist/.*\.js$</code> <code>.*public/assets/.*\.js$</code></td> </tr> <tr> <td>Pipeline</td> <td>Regex</td> <td><code>.*ci\.yml$</code></td> </tr> </tbody> </table> <table> <thead> <tr> <th>Lock File Name</th> <th>Programming Language</th> <th>Package Manager</th> </tr> </thead> <tbody> <tr> <td><code>package-lock.json</code></td> <td>JavaScript</td> <td>npm</td> </tr> <tr> <td><code>yarn.lock</code></td> <td>JavaScript</td> <td>Yarn</td> </tr> <tr> <td><code>npm-shrinkwrap.json</code></td> <td>JavaScript</td> <td>npm</td> </tr> <tr> <td><code>Pipfile.lock</code></td> <td>Python</td> <td>pipenv</td> </tr> <tr> <td><code>poetry.lock</code></td> <td>Python</td> <td>Poetry</td> </tr> <tr> <td><code>conda-lock.yml</code></td> <td>Python</td> <td>conda</td> </tr> <tr> <td><code>Gemfile.lock</code></td> <td>Ruby</td> <td>Bundler</td> </tr> <tr> <td><code>composer.lock</code></td> <td>PHP</td> <td>Composer</td> </tr> <tr> <td><code>packages.lock.json</code></td> <td>.NET</td> <td>NuGet</td> </tr> <tr> <td><code>project.assets.json</code></td> <td>.NET</td> <td>.NET Core</td> </tr> <tr> <td><code>pom.xml</code></td> <td>Java</td> <td>Maven</td> </tr> <tr> <td><code>Cargo.lock</code></td> <td>Rust</td> <td>Cargo</td> </tr> <tr> <td><code>mix.lock</code></td> <td>Elixir</td> <td>Mix</td> </tr> <tr> <td><code>pubspec.lock</code></td> <td>Dart/Flutter</td> <td>pub</td> </tr> <tr> <td><code>go.sum</code></td> <td>Go</td> <td>Go modules</td> </tr> <tr> <td><code>stack.yaml.lock</code></td> <td>Haskell</td> <td>Stack</td> </tr> <tr> <td><code>vcpkg.json</code></td> <td>C++</td> <td>vcpkg</td> </tr> <tr> <td><code>conan.lock</code></td> <td>C++</td> <td>Conan</td> </tr> <tr> <td><code>ivy.xml</code></td> <td>Scala</td> <td>sbt/Ivy</td> </tr> <tr> <td><code>project.clj</code></td> <td>Clojure</td> <td>Leiningen</td> </tr> <tr> <td><code>Podfile.lock</code></td> <td>Swift/Objective-C</td> <td>CocoaPods</td> </tr> <tr> <td><code>Cartfile.resolved</code></td> <td>Swift/Objective-C</td> <td>Carthage</td> </tr> <tr> <td><code>flake.lock</code></td> <td>Nix</td> <td>Nix</td> </tr> </tbody> </table> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can also filter more files, using <a href=/cm-file/#configignore_files><code>config.ignore_files</code></a>.</p> </div> <h4 id=extensions><code>extensions</code></h4> <p>Expects <code>files</code> and provide a list of all unique file extensions.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#files><code>files</code></a></td> <td>The list of changed files with their path</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]</td> <td>List of all unique file extensions</td> </tr> </tbody> </table> </div> <p>For example, check that only one file type was changed:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=cp>{{</span> <span class=nv>files</span> <span class=o>|</span> <span class=nf>extensions</span> <span class=o>|</span> <span class=nf>length</span> <span class=o>==</span> <span class=m>1</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=extractjitfindings><code>extractJitFindings</code></h4> <div class="admonition warning"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span> Available in GitHub only</p> <p>This filter is currently available only in GitHub</p> </div> <p>Get an object with a summary of the findings found by <a href=https://www.jit.io/ >Jit</a> scan. This filter is relevant only for repos that use Jit to scan PRs</p> <p>The <code>pr</code> context includes all the reviews in the pull request, including the reviews written by the Jit bot, along with all the comments (<a href=../context-variables/#conversation-structure>conversations</a>) to the review.</p> <p>This filter reads and parses the reviews with Jit's findings, making them available for use inside the <code>.cm</code> file automations.</p> <p>The output is an object of the following format: <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=p>{</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=w>  </span><span class=nt>&quot;vulnerabilities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=w>    </span><span class=nt>&quot;security_control&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=p>,</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=p>,</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=w>    </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=p>,</span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=w>    </span><span class=nt>&quot;severity&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=p>,</span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=w>    </span><span class=nt>&quot;summary&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=w>  </span><span class=p>}],</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=w>  </span><span class=nt>&quot;metrics&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=w>    </span><span class=nt>&quot;HIGH&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=w>    </span><span class=nt>&quot;MEDIUM&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=w>    </span><span class=nt>&quot;LOW&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=w>    </span><span class=nt>&quot;INFO&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span>
<a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=p>}</span>
</code></pre></div></p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#pr><code>pr</code></a></td> <td>The <code>pr</code> context variable</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Object</td> <td>The object contains the summary of Jit's scan</td> </tr> </tbody> </table> </div> <p>Example of the filter output <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=p>{</span>
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=w>  </span><span class=nt>&quot;vulnerabilities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>      </span><span class=nt>&quot;security_control&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Static Code Analysis Js&quot;</span><span class=p>,</span>
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Codsec.Javascriptnosql-Injection.Nosql-Injection&quot;</span><span class=p>,</span>
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Putting request data into a mongo query can leadto a NoSQL Injection. Be sure to properly sanitize thedata if you absolutely must pass request data into a query.&quot;</span><span class=p>,</span>
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>      </span><span class=nt>&quot;severity&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;HIGH&quot;</span><span class=p>,</span>
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=w>      </span><span class=nt>&quot;summary&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Jit Bot commands and options (e.g., ignore issue)&quot;</span>
<a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=w>      </span><span class=nt>&quot;security_control&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Secret Detection&quot;</span><span class=p>,</span>
<a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Private-Key&quot;</span><span class=p>,</span>
<a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Private Key&quot;</span><span class=p>,</span>
<a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a><span class=w>      </span><span class=nt>&quot;severity&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;HIGH&quot;</span><span class=p>,</span>
<a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a><span class=w>      </span><span class=nt>&quot;summary&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Jit Bot commands and options (e.g., ignore issue)&quot;</span>
<a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a><span class=w>  </span><span class=p>],</span>
<a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a><span class=w>  </span><span class=nt>&quot;metrics&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a><span class=w>    </span><span class=nt>&quot;HIGH&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a><span class=w>    </span><span class=nt>&quot;MEDIUM&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a><span class=w>    </span><span class=nt>&quot;LOW&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-28-22 name=__codelineno-28-22 href=#__codelineno-28-22></a><span class=w>    </span><span class=nt>&quot;INFO&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
<a id=__codelineno-28-23 name=__codelineno-28-23 href=#__codelineno-28-23></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-28-24 name=__codelineno-28-24 href=#__codelineno-28-24></a><span class=p>}</span>
</code></pre></div></p> <p>Assign the output to a variable</p> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=nt>jit</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>pr</span> <span class=o>|</span> <span class=nf>extractJitFindings</span> <span class=cp>}}</span>
</code></pre></div> <p>Add a label if Jit detected secrets in the PR</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=w>    </span><span class=nt>add_bugs_label</span><span class=p>:</span>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=w>      </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>jit.metrics.HIGH</span> <span class=o>&gt;</span> <span class=m>0</span> <span class=cp>}}</span>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=w>      </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-label@v1</span>
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=w>          </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=w>            </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Vulnerable</span><span class=nv> </span><span class=s>code!&quot;&quot;</span>
</code></pre></div> <h4 id=extractsonarfindings><code>extractSonarFindings</code></h4> <div class="admonition warning"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span> Available in GitHub only</p> <p>This filter is currently available only in GitHub</p> </div> <p>Get an object with a summary of the findings found by the SonarCloud scan. This filter is relevant only for repos that use SonarCloud to scan PRs</p> <p>The <code>pr</code> context includes all the comments added to the pull request, including the comment written by the SonarCloud bot that holds a summary of its scan.</p> <p>This filter reads and parses the comment with SonarCloud's scan summary and makes them available to use inside the <code>.cm</code> file automations.</p> <p>The output is an object of the following format: <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=p>{</span>
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>  </span><span class=nt>&quot;bugs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=w> </span><span class=c1>//(&#39;A&#39;-&#39;E&#39;)</span>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=w>  </span><span class=nt>&quot;code_smells&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=w> </span><span class=c1>//(&#39;A&#39;-&#39;E&#39;)</span>
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=w>  </span><span class=nt>&quot;vulnerabilities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=w> </span><span class=c1>//(&#39;A&#39;-&#39;E&#39;)</span>
<a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a><span class=w>  </span><span class=nt>&quot;security_hotspots&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;s</span><span class=kc>tr</span><span class=err>i</span><span class=kc>n</span><span class=err>g&#39;</span><span class=w> </span><span class=c1>//(&#39;A&#39;-&#39;E&#39;)</span>
<a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a><span class=w>  </span><span class=nt>&quot;duplications&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span><span class=p>,</span>
<a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a><span class=w>  </span><span class=nt>&quot;coverage&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>nu</span><span class=err>mber</span>
<a id=__codelineno-31-20 name=__codelineno-31-20 href=#__codelineno-31-20></a><span class=p>}</span>
</code></pre></div></p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#pr><code>pr</code></a></td> <td>The <code>pr</code> context variable</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Object</td> <td>The object contains the summary of SonCloud's scan</td> </tr> </tbody> </table> </div> <p>Example of the filter output <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=p>{</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=w>  </span><span class=nt>&quot;bugs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;B&#39;</span>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=w>  </span><span class=nt>&quot;code_smells&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;B&#39;</span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=w>  </span><span class=nt>&quot;vulnerabilities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;E&#39;</span>
<a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a><span class=w>  </span><span class=nt>&quot;security_hotspots&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a><span class=w>      </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class=w>      </span><span class=nt>&quot;rating&quot;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;A&#39;</span>
<a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a><span class=w>  </span><span class=nt>&quot;duplications&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
<a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a><span class=w>  </span><span class=nt>&quot;coverage&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>70</span>
<a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a><span class=p>}</span>
</code></pre></div></p> <p>Assign the output to a variable</p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=nt>sonar</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>pr</span> <span class=o>|</span> <span class=nf>extractSonarFindings</span> <span class=cp>}}</span>
</code></pre></div> <p>Add a label with the number of bugs if the bugs rating is other than 'A', and use <a href=#maptoenum>mapToEnum</a> to set its color</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=c1># Add Bugs label</span>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>  </span><span class=nt>show_bugs_count</span><span class=p>:</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>sonar.bugs.count</span> <span class=o>&gt;</span> <span class=m>0</span><span class=cp>}}</span>
<a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-label@v1</span>
<a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=w>          </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ð</span><span class=nv> </span><span class=s>x</span><span class=nv> </span><span class=cp>{{</span> <span class=nv>sonar.bugs.count</span> <span class=cp>}}</span><span class=nv> </span><span class=s>Bugs&#39;</span>
<a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=w>          </span><span class=nt>color</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>sonar.bugs.rating</span> <span class=o>|</span> <span class=nf>mapToEnum</span><span class=o>(</span><span class=nv>enum</span> <span class=o>=</span> <span class=nv>colors</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>
<a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=nt>colors</span><span class=p>:</span>
<a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=w>  </span><span class=nt>A</span><span class=p>:</span><span class=w> </span><span class=s>&#39;05AA02&#39;</span>
<a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=w>  </span><span class=nt>B</span><span class=p>:</span><span class=w> </span><span class=s>&#39;B6D146&#39;</span>
<a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a><span class=w>  </span><span class=nt>C</span><span class=p>:</span><span class=w> </span><span class=s>&#39;EABE05&#39;</span>
<a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a><span class=w>  </span><span class=nt>D</span><span class=p>:</span><span class=w> </span><span class=s>&#39;DF8339&#39;</span>
<a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a><span class=w>  </span><span class=nt>E</span><span class=p>:</span><span class=w> </span><span class=s>&#39;D4343F&#39;</span>
</code></pre></div> <h4 id=explainrankbygitblame><code>explainRankByGitBlame</code></h4> <p>This filter helps to explain the results of <a href=#rankbygitblame><code>rankByGitBlame</code></a>, the output is in Markdown format that can be used in a PR comment.</p> <p>The output lists the Git provider users, e.g., GitHub users, which are mapped from the Git users included in the <code>git-blame</code> output. Git users that could not be automatically mapped are marked with <code>*</code>. To map these users, you can add <code>user_mapping</code> see instructions <a href=/cm-file#config>here</a>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td>The <code>repo</code> context variable</td> </tr> <tr> <td><code>lt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those below the specified threshold</td> </tr> <tr> <td><code>gt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those above the specified threshold</td> </tr> <tr> <td>-</td> <td>Output</td> <td>String</td> <td>Explaining <a href=#rankbygitblame><code>rankByGitBlame</code></a> results in markdown format</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Each contributor's result is rounded down to the nearest integer, so the total may add up to less than 100%.</p> </div> </div> <p>For example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=w>  </span><span class=nt>the_right_reviewer</span><span class=p>:</span>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-reviewers@v1</span>
<a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=w>          </span><span class=nt>reviewers</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>rankByGitBlame</span><span class=o>(</span><span class=nv>gt</span><span class=o>=</span><span class=m>50</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-comment@v1</span>
<a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=w>          </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=w>            </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>explainRankByGitBlame</span><span class=o>(</span><span class=nv>gt</span><span class=o>=</span><span class=m>50</span><span class=o>)</span> <span class=cp>}}</span>
</code></pre></div> <p>Note the comment starts with <code>|</code> and a <code>new-line</code> as <code>explainRankByGitBlame</code> generates a multiline comment.</p> <h4 id=isfirstcommit><code>isFirstCommit</code></h4> <p>Return <code>true</code> if it's the author's first commit in the repo.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#repo><code>repo.contributors</code></a></td> <td>List of contributors in the repo</td> </tr> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>The contributor name</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if it's the author's first commit of the selected contributor</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=cp>{{</span> <span class=nv>repo.contributors</span> <span class=o>|</span> <span class=nf>isFirstCommit</span><span class=o>(</span><span class=nv>branch.author</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-comment@v1</span>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=w>    </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=w>      </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Welcome</span><span class=nv> </span><span class=cp>{{</span><span class=nv>branch.author</span><span class=cp>}}</span><span class=s>!&quot;</span>
</code></pre></div> <h4 id=isformattingchange><code>isFormattingChange</code></h4> <p>Return <code>true</code> if all file diffs are validated as formatting changes. This filter function works for JavaScript, TypeScript, Python, JSON, YAML and HTML.</p> <p>gitStream determines formatting changes by minifying the source code for the incoming changes and the existing code and comparing them. If they are identical, this filter function returns <code>true</code>. If any unsupported languages are contained in the PR, gitStream will return <code>false</code>.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#source><code>source.diff.files</code></a></td> <td>List of file diffs</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Bool</td> <td><code>true</code> if the all code changes are non functional</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>isFormattingChange</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=maptoenum><code>mapToEnum</code></h4> <p>Get the enum value matches to the input key</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>The key name</td> </tr> <tr> <td><code>enum</code></td> <td>Input</td> <td>Enum Object</td> <td>The enum object to which the input string should be matched</td> </tr> <tr> <td>-</td> <td>Output</td> <td>Object</td> <td>The value of the input key in the input enum object</td> </tr> </tbody> </table> </div> <p>For example, set a label color according to names in the enum:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=w>  </span><span class=nt>label_color</span><span class=p>:</span>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=w>       </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-label@v1</span>
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=w>          </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Blue</span><span class=nv> </span><span class=s>label&#39;</span>
<a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=w>          </span><span class=nt>color</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=s2>&quot;blue&quot;</span> <span class=o>|</span> <span class=nf>mapToEnum</span><span class=o>(</span><span class=nv>enum</span> <span class=o>=</span> <span class=nv>colors</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>
<a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a><span class=nt>colors</span><span class=p>:</span>
<a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a><span class=w>  </span><span class=nt>red</span><span class=p>:</span><span class=w> </span><span class=s>&#39;FF0000&#39;</span>
<a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a><span class=w>  </span><span class=nt>green</span><span class=p>:</span><span class=w> </span><span class=s>&#39;00FF00&#39;</span>
<a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a><span class=w>  </span><span class=nt>blue</span><span class=p>:</span><span class=w> </span><span class=s>&#39;0000FF&#39;</span>
<a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a><span class=w>  </span><span class=nt>yellow</span><span class=p>:</span><span class=w> </span><span class=s>&#39;FFFF00&#39;</span>
</code></pre></div> <h4 id=matchdifflines><code>matchDiffLines</code></h4> <p>Checks diff for matching lines.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>[Object]</td> <td>The list of objects</td> </tr> <tr> <td><code>regex</code></td> <td>Input</td> <td>String</td> <td>Regex term to match with the input items, use <code>\\</code> for <code>\</code></td> </tr> <tr> <td><code>ignoreWhiteSpaces</code></td> <td>Input</td> <td>Bool</td> <td><code>false</code> by default, match a named attribute in the input object</td> </tr> <tr> <td><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 8.807V3.5h-.563a.75.75 0 0 1 0-1.5h9.125a.75.75 0 0 1 0 1.5H16v5.307l5.125 9.301c.964 1.75-.302 3.892-2.299 3.892H5.174c-1.998 0-3.263-2.142-2.3-3.892ZM4.189 18.832a1.123 1.123 0 0 0 .985 1.668h13.652a1.123 1.123 0 0 0 .985-1.668L17.7 15H6.3ZM14.5 3.5h-5V9a.75.75 0 0 1-.093.362L7.127 13.5h9.746l-2.28-4.138A.75.75 0 0 1 14.5 9Z"/></svg></span> <code>caseSensitive</code></td> <td>Input</td> <td>Bool</td> <td><code>true</code> by default, ignore case when matching terms</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[Bool]</td> <td><code>true</code> for every matching object</td> </tr> </tbody> </table> </div> <p>For example, to check if all the changes are of adding prints and ignore white spaces:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=cp>{{</span> <span class=nv>source.diff.files</span> <span class=o>|</span> <span class=nf>matchDiffLines</span><span class=o>(</span><span class=nv>regex</span><span class=o>=</span><span class=nv>r</span><span class=o>/</span><span class=err>^\</span><span class=o>+</span><span class=err>.</span><span class=o>*</span><span class=nv>console</span><span class=err>\</span><span class=nv>.log</span><span class=o>/,</span> <span class=nv>ignoreWhiteSpaces</span><span class=o>=</span><span class=kp>true</span><span class=o>)</span> <span class=o>|</span> <span class=nf>every</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=rankbygitactivity><code>rankByGitActivity</code></h4> <p>Get list of contributors based on <code>git-commit</code> activity.</p> <p>The <code>repo</code> context includes all the changed files, for each file it includes each contributor number of lines changed every week over the last 52 weeks, based on <code>git-commit</code>.</p> <p>These functions compare each contributor changes per week and yield an average percentage of contribution for any given file. For example, in a certain week a file had 500 line changed, 200 by a first user, while 3 other users changed 100 lines each. So the score for the first user in that week will be 40 (200/500 in %). The function then average the score for each user for the selected time period.</p> <p>Then you can use the thresholds to get the right reviewer.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td>The <code>repo</code> context variable</td> </tr> <tr> <td><code>weeks</code></td> <td>Input</td> <td>Integer</td> <td>The number of last weeks to include</td> </tr> <tr> <td><code>lt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those below the specified threshold</td> </tr> <tr> <td><code>gt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those above the specified threshold</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]</td> <td>The list of users based on their code score comparison</td> </tr> </tbody> </table> </div> <p>Check if the branch author is a rookie</p> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=nt>active_coders</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>rankByGitActivity</span><span class=o>(</span><span class=nv>gt</span><span class=o>=</span><span class=m>50</span><span class=o>,</span> <span class=nv>weeks</span><span class=o>=</span><span class=m>12</span><span class=o>)</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=rankbygitblame><code>rankByGitBlame</code></h4> <p>Get list of contributors based on <code>git-blame</code> results</p> <p>The <code>repo</code> context includes all the changed files, for each file it includes the contributors' percentage of lines in the file, based on <code>git-blame</code>.</p> <p>This function sums all these percentages per user and yield an average percentage of contribution. Then you can use the thresholds to get the right reviewer.</p> <p>The output lists the Git provider users, e.g., GitHub users, which are mapped from the Git users included in the <code>git-blame</code> output. When gitStream cannot map the Git user to a Git provider user it will be dropped from the output list, hence the list may contain less than 100% of the lines.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td><a href=../context-variables/#repo><code>repo</code></a></td> <td>The <code>repo</code> context variable</td> </tr> <tr> <td><code>lt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those below the specified threshold</td> </tr> <tr> <td><code>gt</code></td> <td>Input</td> <td>Integer</td> <td>Filter the user list, keeping those above the specified threshold</td> </tr> <tr> <td>-</td> <td>Output</td> <td>[String]</td> <td>The list of users based on their code score comparison, sorted by rank - first has highest score</td> </tr> </tbody> </table> </div> <p>Example of the filter output, note the output are GitHub users in the example: <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=p>[</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=w>  </span><span class=s2>&quot;PopeyeUser&quot;</span><span class=p>,</span>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=w>  </span><span class=s2>&quot;olive_user&quot;</span><span class=p>,</span>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=w>  </span><span class=s2>&quot;BRUTUS_USER&quot;</span>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=p>]</span>
</code></pre></div></p> <p>Get the most significant contributors for the PR files:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=nt>contributors</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>rankByGitBlame</span><span class=o>(</span><span class=nv>gt</span><span class=o>=</span><span class=m>30</span><span class=o>)</span> <span class=cp>}}</span>
</code></pre></div> <p>Check if the branch author is a rookie</p> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=nt>is_rookie</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=nv>repo</span> <span class=o>|</span> <span class=nf>rankByGitBlame</span><span class=o>(</span><span class=nv>lt</span><span class=o>=</span><span class=m>15</span><span class=o>)</span> <span class=o>|</span> <span class=nf>match</span><span class=o>(</span><span class=nv>term</span><span class=o>=</span><span class=nv>branch.author</span><span class=o>)</span> <span class=o>|</span> <span class=nf>some</span> <span class=cp>}}</span>
</code></pre></div> <h4 id=readfile><code>readFile</code></h4> <p>Reads the contents of a file from the current branch or the <code>cm</code> repo and returns it as a string.</p> <div class=filter-details> <table> <thead> <tr> <th>Argument</th> <th>Usage</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>-</td> <td>Input</td> <td>String</td> <td>The relative file path in the current repo. Prepend <code>../cm/</code> to get files from the <code>cm</code> repo</td> </tr> <tr> <td><code>output</code></td> <td>Input</td> <td>String</td> <td>The content type. Optional, <code>txt</code> by default. Allowed options are <code>txt</code> or <code>json</code>. When using <code>json</code>, the output will be returned as a stringified Object</td> </tr> <tr> <td>-</td> <td>Output</td> <td>String</td> <td>The contents of the file as a String. In case of <code>json</code> output, the result will be <code>JSON.stringified</code></td> </tr> </tbody> </table> </div> <p>Examples:</p> <p>Add a comment with a file's content:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=nt>automations</span><span class=p>:</span>
<a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=w>  </span><span class=nt>add_readme_comment</span><span class=p>:</span>
<a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=w>    </span><span class=nt>if</span><span class=p>:</span>
<a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=w>    </span><span class=nt>run</span><span class=p>:</span>
<a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">add-comment@v1</span>
<a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span>
<a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a><span class=w>          </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a><span class=w>            </span><span class=cp>{{</span> <span class=nv>README_CONTENT</span> <span class=cp>}}</span>
<a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>
<a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a><span class=nt>README_CONTENT</span><span class=p>:</span><span class=w> </span><span class=cp>{{</span> <span class=s2>&quot;./README.md&quot;</span> <span class=o>|</span> <span class=nf>readFile</span><span class=o>()</span> <span class=cp>}}</span>
</code></pre></div> <p>Read JSON configuration file from the <code>cm</code> repo and use some of the properties in a comment: <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a>automations:
<a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>  describe_teams:
<a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a>    if:
<a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a>      - {{ true }}
<a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a>    run:
<a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a>      - action: add-comment@v1
<a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a>        args:
<a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a>          comment: |
<a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a>              We have {{ TEAMS | length }} teams with {{ TEAMS.front.members | length + TEAMS.back.members | length }} members in total:
<a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a>              FrontEnd: include {{ TEAMS.front.members | length }} members
<a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a>              BackEnd: include {{ TEAMS.back.members | length }} members
<a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a>
<a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>
<a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a>TEAMS: {{ &quot;../cm/TEAMS.json&quot; | readFile(output=&quot;json&quot;) }}
</code></pre></div></p> <p>Configuration file example: <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=p>{</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=w>  </span><span class=nt>&quot;front&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Frontend&quot;</span><span class=p>,</span>
<a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=w>    </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Frontend team&quot;</span><span class=p>,</span>
<a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=w>    </span><span class=nt>&quot;members&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a><span class=w>      </span><span class=s2>&quot;John&quot;</span><span class=p>,</span>
<a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=w>      </span><span class=s2>&quot;Jane&quot;</span>
<a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=w>    </span><span class=p>]</span>
<a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a><span class=w>  </span><span class=nt>&quot;back&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Backend&quot;</span><span class=p>,</span>
<a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a><span class=w>    </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Backend team&quot;</span><span class=p>,</span>
<a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a><span class=w>    </span><span class=nt>&quot;members&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a><span class=w>      </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span>
<a id=__codelineno-46-15 name=__codelineno-46-15 href=#__codelineno-46-15></a><span class=w>      </span><span class=s2>&quot;Bob&quot;</span>
<a id=__codelineno-46-16 name=__codelineno-46-16 href=#__codelineno-46-16></a><span class=w>    </span><span class=p>]</span>
<a id=__codelineno-46-17 name=__codelineno-46-17 href=#__codelineno-46-17></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-46-18 name=__codelineno-46-18 href=#__codelineno-46-18></a><span class=p>}</span>
</code></pre></div></p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 LinearB, Inc. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/linear-b/gitstream/ target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["header.autohide", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.ce72ebac.min.js></script> </body> </html>